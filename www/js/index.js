(()=>{var e,r,n,t,a={876:(e,r,n)=>{function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function a(e){var r=e.length,n=new Array(r);n.fill(!0);for(var t=0;t<r;t++)if(n[t]){var a=e[t];if(a)for(var o=t+1;o<r;o++)a===e[o]&&(n[t]=n[o]=!1);else n[t]=!1}return n}var o=n(683);e.exports=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._matrix=r,this._matrixMarks=o.matrix.makeMatrix(!0)}var r,n;return r=e,(n=[{key:"check",value:function(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every((function(e){return e.every((function(e){return e}))})),this._success}},{key:"checkRows",value:function(){for(var e=0;e<9;e++)for(var r=a(this._matrix[e]),n=0;n<r.length;n++)r[n]||(this._matrixMarks[e][n]=!1)}},{key:"checkCols",value:function(){for(var e=0;e<9;e++){for(var r=[],n=0;n<9;n++)r[n]=this._matrix[n][e];for(var t=a(r),o=0;o<t.length;o++)t[o]||(this._matrixMarks[o][e]=!1)}}},{key:"checkBoxes",value:function(){for(var e=0;e<9;e++)for(var r=a(o.box.getBoxCells(this._matrix,e)),n=0;n<9;n++)if(!r[n]){var t=o.box.convertFromBoxIndex(e,n),i=t.rowIndex,c=t.colIndex;this._matrixMarks[i][c]=!1}}},{key:"matrixMarks",get:function(){return this._matrixMarks}},{key:"isSuccess",get:function(){return this._success}}])&&t(r.prototype,n),e}()},403:(e,r,n)=>{function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var a=n(683),o=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n;return r=e,(n=[{key:"generate",value:function(){for(;!this.internalGenerate();)console.log("try again")}},{key:"internalGenerate",value:function(){var e=this;return this.matrix=a.matrix.makeMatrix(),this.orders=a.matrix.makeMatrix().map((function(e){return e.map((function(e,r){return r}))})).map((function(e){return a.matrix.shuffle(e)})),Array.from({length:9}).every((function(r,n){return e.fillNumber(n+1)}))}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,r){if(r>8)return!0;for(var n=this.matrix[r],t=this.orders[r],o=0;o<9;o++){var i=t[o];if(!n[i]&&a.matrix.checkFillable(this.matrix,e,r,i)){if(n[i]=e,this.fillRow(e,r+1))return!0;n[i]=0}}return!1}}])&&t(r.prototype,n),e}();e.exports=o},657:(e,r,n)=>{function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var a=n(403);e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new a;r.generate(),this.solutionMatrix=r.matrix}var r,n;return r=e,(n=[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.puzzleMatrix=this.solutionMatrix.map((function(r){return r.map((function(r){return 9*Math.random()<e?0:r}))}))}}])&&t(r.prototype,n),e}()},683:e=>{function r(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var n={makeRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=new Array(9);return r.fill(e),r},makeMatrix:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9},(function(){return e.makeRow(r)}))},shuffle:function(e){for(var r=e.length-2,n=0;n<=r;n++){var t=n+Math.floor(Math.random()*(e.length-n)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e},checkFillable:function(e,r,n,a){for(var o=e[n],i=this.makeRow().map((function(r,n){return e[n][a]})),c=t.convertToBoxIndex(n,a).boxIndex,s=t.getBoxCells(e,c),l=0;l<9;l++)if(o[l]===r||i[l]===r||s[l]===r)return!1;return!0}},t={getBoxCells:function(e,r){for(var n=3*Math.floor(r/3),t=r%3*3,a=[],o=0;o<9;o++){var i=n+Math.floor(o/3),c=t+o%3;a.push(e[i][c])}return a},convertToBoxIndex:function(e,r){return{boxIndex:3*Math.floor(e/3)+Math.floor(r/3),cellIndex:e%3*3+r%3}},convertFromBoxIndex:function(e,r){return{rowIndex:3*Math.floor(e/3)+Math.floor(r/3),colIndex:e%3*3+r%3}}};e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,o;return a=e,o=[{key:"matrix",get:function(){return n}},{key:"box",get:function(){return t}}],null&&r(a.prototype,null),o&&r(a,o),e}()},134:(e,r,n)=>{function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(683),n(403);var a=n(657),o=n(876);e.exports=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$container=r}var r,n;return r=e,(n=[{key:"build",value:function(){var e=new a;e.make();var r=e.puzzleMatrix,n=["row_g_top","row_g_middle","row_g_bottom"],t=["col_g_left","col_g_center","col_g_right"],o=r.map((function(e){return e.map((function(e,r){return $("<span>").addClass(t[r%3]).addClass(e?"fixed":"empty").text(e)}))})).map((function(e,r){return $("<div>").addClass("row").addClass(n[r%3]).append(e)}));this._$container.append(o)}},{key:"layout",value:function(){var e=$("span:first",this._$container).width();$("span",this._$container).height(e).css({"line-height":"".concat(e,"px"),"font-size":e<32?"".concat(e/2,"px"):""})}},{key:"bindPopup",value:function(e){this._$container.on("click","span",(function(r){var n=$(r.target);n.is(".fixed")||e.popup(n)}))}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}},{key:"check",value:function(){var e=this._$container.children().map((function(e,r){return $(r).children().map((function(e,r){return parseInt($(r).text())||0}))})).toArray().map((function(e){return e.toArray()}));console.log(e);var r=new o(e);if(r.check())return!0;var n=r.matrixMarks;this._$container.children().each((function(e,r){$(r).children().each((function(r,t){var a=$(t);a.is(".fixed")||n[e][r]?a.removeClass("error"):a.addClass("error")}))}))}},{key:"reset",value:function(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}}])&&t(r.prototype,n),e}()},243:e=>{function r(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}e.exports=function(){function e(r){var n=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$panel=r.hide().removeClass("hidden"),this._$panel.on("click","span",(function(e){var r=n._$targetCell,t=$(e.target);t.hasClass("mark1")?r.hasClass("mark1")?r.removeClass("mark1"):r.removeClass("mark2").addClass("mark1"):t.hasClass("mark2")?r.hasClass("mark2")?r.removeClass("mark2"):r.removeClass("mark1").addClass("mark2"):t.hasClass("empty")?r.text(0).addClass("empty"):r.removeClass("empty").text(t.text()),n.hide()}))}var n,t;return n=e,(t=[{key:"popup",value:function(e){this._$targetCell=e;var r=e.position(),n=r.left,t=r.top,a=$(document.body).width();n+this._$panel.width()>a?this._$panel.css({right:0,top:"".concat(t,"px"),left:"initial"}).show():this._$panel.css({left:"".concat(n,"px"),top:"".concat(t,"px")}).show()}},{key:"hide",value:function(){this._$panel.hide()}}])&&r(n.prototype,t),e}()}},o={};function i(e){if(o[e])return o[e].exports;var r=o[e]={exports:{}};return a[e](r,r.exports,i),r.exports}e=i(134),r=i(243),n=new e($("#container")),t=new r($("#popupNumbers")),n.build(),n.layout(),n.bindPopup(t),$("#check").on("click",(function(e){n.check()&&alert("成功")})),$("#reset").on("click",(function(e){n.reset()})),$("#clear").on("click",(function(e){n.clear()})),$("#rebuild").on("click",(function(e){n.rebuild()}))})();
//# sourceMappingURL=index.js.map